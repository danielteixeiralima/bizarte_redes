{% extends "base.html" %}

{% block content %}
    <h1>Atualizar Empresa</h1>
    <script>
        var empresa = JSON.parse(localStorage.getItem('listaEmpresa'));
        var empresas = [];
        for (var i = 0; i < empresa.length; i++) {
            empresas.push(empresa[i].name); // Adiciona o nome da empresa ao array 'lista'
        }
    </script>
    <div class="container">
        <div class="row justify-content-center align-items-center" style="height:100vh">
            <div class="col-4">
                <h2 class="text-center mb-4 text-white">Atualizar Empresa</h2>
                <div class="card" style="background-color: #333;">
                    <div class="card-body">
                        <form action="{{ url_for('atualizar_empresa', id=empresa.id) }}" method="post">
                            <div class="form-group">
                                <label for="nome_contato" style="color: white;">Nome do Contato:</label>
                                <input type="text" class="form-control" id="nome_contato" name="nome_contato" value="{{ empresa.nome_contato }}" required>
                            </div>
                            <div class="form-group">
                                <label for="email_contato" style="color: white;">Email do Contato:</label>
                                <input type="email" class="form-control" id="email_contato" name="email_contato" value="{{ empresa.email_contato }}" required>
                            </div>
                            <div class="form-group">
                                <label for="telefone_contato" style="color: white;">Telefone do Contato:</label>
                                <input type="tel" class="form-control" id="telefone_contato" name="telefone_contato" value="{{ empresa.telefone_contato }}" required>
                            </div>
                            <div class="form-group">
                                <label for="endereco_empresa" style="color: white;">Endereço da Empresa:</label>
                                <input type="text" class="form-control" id="endereco_empresa" name="endereco_empresa" value="{{ empresa.endereco_empresa }}" required>
                            </div>
                            <div class="form-group">
                                <label for="setor_atuacao" style="color: white;">Setor de Atuação:</label>
                                <input type="text" class="form-control" id="setor_atuacao" name="setor_atuacao" value="{{ empresa.setor_atuacao }}" required>
                            </div>
                            <div class="form-group">
                                <label for="tamanho_empresa" style="color: white;">Tamanho da Empresa:</label>
                                <input type="text" class="form-control" id="tamanho_empresa" name="tamanho_empresa" value="{{ empresa.tamanho_empresa }}" required>
                            </div>
                            <div class="form-group">
                                <label for="descricao_empresa" style="color: white;">Descrição da Empresa:</label>
                                <textarea class="form-control" id="descricao_empresa" name="descricao_empresa" required>{{ empresa.descricao_empresa }}</textarea>
                            </div>
                            <div class="form-group">
                                <label for="objetivos_principais" style="color: white;">Objetivos Principais:</label>
                                <textarea class="form-control" id="objetivos_principais" name="objetivos_principais" required>{{ empresa.objetivos_principais }}</textarea>
                            </div>
                            <div class="form-group">
                                <label for="historico_interacoes" style="color: white;">Histórico de Interações:</label>
                                <textarea class="form-control" id="historico_interacoes" name="historico_interacoes" required>{{ empresa.historico_interacoes }}</textarea>
                            </div>
                            <div class="form-group">
                                <label for="vincular_instagram" style="color: white;">Vincular conta do Instagram:</label>
                                <select class="form-control" id="vincular_instagram" name="vincular_instagram" required></select>
                            </div>
                            <button type="submit" class="btn btn-primary btn-block">Atualizar</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            var select = document.getElementById('vincular_instagram');
            empresas.unshift("");
            for(var i = 0; i < empresas.length; i++) {
                var opt = document.createElement('option');
                
                opt.value = empresas[i];
                opt.innerHTML = empresas[i];
                if (empresas[i] == "{{ empresa.vincular_instagram }}") {
                    opt.selected = true;
                }
                select.appendChild(opt);
            }
        });
    </script>
{% endblock %}